<div class="speakersContainer">
    <article class="row thinRow">

        <% if(!eval('site.data.sessions' + page.year) || !eval('site.data.sessions' + page.year + '.speakers')) return; %>
        <% for (var speaker of eval('site.data.sessions' + page.year + '.speakers') ) {
            
            var firstName = speaker.firstName;
            var lastName = speaker.lastName;

            var firstNameTrimmed = firstName.replace(/[^a-zA-Z0-9-_\.]/g, '');
            var lastNameTrimmed = lastName.replace(/[^a-zA-Z0-9-_\.]/g, '');

            var speakerPageUrl = `/speakers/${page.year}/${firstName.replace(/[ \"]/g,"")}-${lastName.replace(/[ \"]/g,"")}.html`;
            
        %>
            <div class="col-md-3">
                <div class="speaker-card">
                    <a href="<%= speakerPageUrl %>">
                        <div class="speaker-photo">
                            <%
                                let fileExtensionRegex = /(?:\.([^.]+))?$/;
                                let fileExtension = fileExtensionRegex.exec(speaker.profilePicture)[1];
                                let profilePictureUrl = `/images/speakers/${page.year}/${firstNameTrimmed}-${lastNameTrimmed}.${fileExtension}`;
                            %>
                            <img src="<%= profilePictureUrl %>" alt="<%= speaker.firstName + ' ' + speaker.lastName %>">
                        </div>
                    </a>
                    <div class="speaker-info">
                        <h3>
                            <a href="<%= speakerPageUrl %>">
                                <%= speaker.firstName + " " + speaker.lastName %>
                            </a>
                        </h3>
                        <% 
                            var title = speaker.tagLine;
                            if(title.length > 50) {
                                title = title.slice(0,50) + "...";
                            }
                        %>
                        <div class="speaker-title"><%= title %></div>
                    </div>
                </div>
            </div>
        <% } %>
    </article>
</div>
<% if(site.data.lastUpdated && site.data.lastUpdated.timestamp) { %>
    <p class="small font-ui" style="color: var(--stir-gray); margin-top: 24px;">Last Updated: <%= site.data.lastUpdated.timestamp %></p>
<% } %>