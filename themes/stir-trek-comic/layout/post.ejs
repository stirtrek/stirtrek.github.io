<%# Post layout: shows title, author, date, tags, and content %>

<div class="body-content" role="main">

  <h1 id="blogposts"><%= page.title %></h1><div class="icon-hr"></div>

<article class="post">
  <header class="post-header">
    <div class="post-meta">
      <% var author = (page.author || page.author_profile || config.author || site.author || 'Staff'); %>
      <span class="post-author">By <%= author %></span>
      <span class="post-date"> | <%= page.date ? page.date.format(config.date_format || 'YYYY-MM-DD') : '' %></span>

      <% if (page.tags && page.tags.length) { %>
        <span class="post-tags"> | Tags: 
          <% 
            var tagLinks = [];
            if (typeof page.tags.each === 'function') {
              page.tags.each(function(t){
                var tagName = (t && (t.name || t)) || '';
                if (!tagName) return;
                var tagPath = (t && t.path) ? t.path : ('/tags/' + tagName + '/');
                tagLinks.push('<a href="' + url_for(tagPath) + '">' + tagName + '</a>');
              });
            } else {
              for (var i=0; i<page.tags.length; i++) {
                var t = page.tags[i];
                var tagName = (typeof t === 'object') ? (t.name || '') : t;
                if (!tagName) continue;
                var tagPath = (t && t.path) ? t.path : ('/tags/' + tagName + '/');
                tagLinks.push('<a href="' + url_for(tagPath) + '">' + tagName + '</a>');
              }
            }
          %>
          <%- tagLinks.join(', ') %>
        </span>
      <% } %>
    </div>
  </header>

  <div class="post-content">
    <%- page.content %>
  </div>
</article>
  
</div>
